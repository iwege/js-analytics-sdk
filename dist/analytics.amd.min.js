define(function(){return function(e){function i(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return e[o].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}var n={};return i.m=e,i.c=n,i.p="",i(0)}([function(e,i,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function s(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i["default"]=e,i}function t(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,i){for(var n=0;n<i.length;n++){var o=i[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(i,n,o){return n&&e(i.prototype,n),o&&e(i,o),i}}(),a=n(1),d=s(a),l=n(2),u=s(l),w=n(3),c=o(w),p="0.0.1",f=function(){function e(i){if(t(this,e),"object"!=typeof i)throw"LeanAnalytics need a argument at least.";if(!i.appId)throw"Options must have appId.";if(!i.appKey)throw"Options must have appKey.";var n=i.localKey;"string"==typeof n&&u.setLocalKey(n);var o=c["default"](i);u.pageView(o),u.sessionView(o),this.send=o.send}return r(e,null,[{key:"_tool",value:d,enumerable:!0},{key:"_engine",value:u,enumerable:!0},{key:"version",value:p,enumerable:!0}]),e}();i["default"]=f,e.exports=i["default"]},function(e,i){"use strict";function n(){return(new Date).getTime().toString(36)+Math.random().toString(36).substring(2,3)}function o(){return""+r+n()+n()+n()}function s(e,i){var n=e.url,o=e.method,s=void 0===o?"get":o,t=e.appId,r=e.appKey,a=e.data,d=new XMLHttpRequest;d.open(s,n),("post"===s||"put"===s)&&d.setRequestHeader("Content-Type","application/json"),t&&d.setRequestHeader("X-AVOSCloud-Application-Id",t),r&&d.setRequestHeader("X-AVOSCloud-Application-Key",r),d.onload=function(e){d.status>=200&&d.status<300?i(null,JSON.parse(d.responseText)):i(JSON.parse(d.responseText))},d.onerror=function(e){i(new Error("Network error"),e)},d.send(JSON.stringify(a))}function t(){return Date.now()}Object.defineProperty(i,"__esModule",{value:!0}),i.getId=o,i.ajax=s,i.now=t;var r="LEAN"},function(e,i,n){"use strict";function o(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i["default"]=e,i}function s(){var e=window.localStorage.getItem(u);return e||(e=l.getId(),window.localStorage.setItem(u,e)),e}function t(e){u=e}function r(e){function i(){o=l.now(),t=window.location.href}function n(){s=l.now(),e.send({event:"_page",duration:s-o,tag:t})}var o=void 0,s=void 0,t=void 0;i(),window.addEventListener("hashchange",function(e){n(),i()}),e.isNW?nodeRequire("nw.gui").Window.get().on("close",function(){n()}):window.addEventListener("beforeunload",function(){n()})}function a(e){var i=l.now(),n=function(){var n=l.now();e.send({event:"_session.close",duration:n-i})};e.isNW?nodeRequire("nw.gui").Window.get().on("close",n):window.addEventListener("beforeunload",n)}Object.defineProperty(i,"__esModule",{value:!0}),i.getId=s,i.setLocalKey=t,i.pageView=r,i.sessionView=a;var d=n(1),l=o(d),u="leancloud-analytics-id"},function(e,i,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function s(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i["default"]=e,i}function t(e){var i=l().getResult();return e.map(function(e){return e.attributes=e.attr||{},e.attributes.ua=i,delete e.attr,e})}function r(e){if(Array.isArray(e)&&e.length)return e;if(!e||!e.event)return!1;var i=e.event,n=e.attr,o=e.duration,s=e.tag,t={event:i,attr:n,duration:o,tag:s};return[t]}function a(e,i){var n=i.platform,o=void 0===n?"web":n,s=i.version,t=i.channel;return s=s.toString()?"0":s.toString(),{client:{id:f.getId(),platform:o,app_version:s,app_channel:t},session:{id:c.getId()},events:e}}function d(e,i){var n=e.appId,o=e.appKey,s=e.data;c.ajax({url:g,method:"post",data:s,appId:n,appKey:o},function(e,n){i&&i(e,n)})}function l(){return new m["default"]}function u(e){var i=e.appId,n=e.appKey,o=e.version,s=void 0===o?void 0:o,l=e.channel,u=void 0===l?void 0:l,w=e.platform,c=void 0===w?"web":w,p=e.isNW,f=void 0===p?!1:p,v={send:function(e,o){var l=r(e);if(!l)return void o(new Error("EventObject must have a event value."));l=t(l);var w=a(l,{platform:c,version:s,channel:u});return d({appId:i,appKey:n,data:w},o)}};return v.isNW=f,v}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=u;var w=n(1),c=s(w),p=n(2),f=s(p),v=n(4),m=o(v),g="https://api.leancloud.cn/1.1/stats/open/collect";e.exports=i["default"]},function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="0.7.8",o="",s="?",t="function",r="undefined",a="object",d="string",l="major",u="model",w="name",c="type",p="vendor",f="version",v="architecture",m="console",g="mobile",b="tablet",h="smarttv",y="wearable",x="embedded",k={extend:function(e,i){for(var n in i)-1!=="browser cpu device engine os".indexOf(n)&&i[n].length%2===0&&(e[n]=i[n].concat(e[n]));return e},has:function(e,i){return"string"==typeof e?-1!==i.toLowerCase().indexOf(e.toLowerCase()):!1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===d?e.split(".")[0]:void 0}},_={rgx:function(){for(var e,i,n,o,s,d,l,u=0,w=arguments;u<w.length&&!d;){var c=w[u],p=w[u+1];if(typeof e===r){e={};for(o in p)s=p[o],typeof s===a?e[s[0]]=void 0:e[s]=void 0}for(i=n=0;i<c.length&&!d;)if(d=c[i++].exec(this.getUA()))for(o=0;o<p.length;o++)l=d[++n],s=p[o],typeof s===a&&s.length>0?2==s.length?typeof s[1]==t?e[s[0]]=s[1].call(this,l):e[s[0]]=s[1]:3==s.length?typeof s[1]!==t||s[1].exec&&s[1].test?e[s[0]]=l?l.replace(s[1],s[2]):void 0:e[s[0]]=l?s[1].call(this,l,s[2]):void 0:4==s.length&&(e[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):void 0):e[s]=l?l:void 0;u+=2}return e},str:function(e,i){for(var n in i)if(typeof i[n]===a&&i[n].length>0){for(var o=0;o<i[n].length;o++)if(k.has(i[n][o],e))return n===s?void 0:n}else if(k.has(i[n],e))return n===s?void 0:n;return e}},O={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},S={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[w,f],[/\s(opr)\/([\w\.]+)/i],[[w,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi)\/([\w\.-]+)/i],[w,f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[w,"IE"],f],[/(edge)\/((\d+)?[\w\.]+)/i],[w,f],[/(yabrowser)\/([\w\.]+)/i],[[w,"Yandex"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[w,/_/g," "],f],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[w,f],[/(dolfin)\/([\w\.]+)/i],[[w,"Dolphin"],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[w,"Chrome"],f],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[f,[w,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[f,[w,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[f,[w,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[w,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,w],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[w,[f,_.str,O.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[w,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[w,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[w,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,k.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[v,/ower/,"",k.lowerize]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[v,k.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[u,p,[c,b]],[/applecoremedia\/[\w\.]+ \((ipad)/],[u,[p,"Apple"],[c,b]],[/(apple\s{0,1}tv)/i],[[u,"Apple TV"],[p,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[p,u,[c,b]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[u,[p,"Amazon"],[c,b]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[u,_.str,O.device.amazon.model],[p,"Amazon"],[c,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[u,p,[c,g]],[/\((ip[honed|\s\w*]+);/i],[u,[p,"Apple"],[c,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[p,u,[c,g]],[/\(bb10;\s(\w+)/i],[u,[p,"BlackBerry"],[c,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[u,[p,"Asus"],[c,b]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[p,"Sony"],[u,"Xperia Tablet"],[c,b]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[p,"Sony"],[u,"Xperia Phone"],[c,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[p,u,[c,m]],[/android.+;\s(shield)\sbuild/i],[u,[p,"Nvidia"],[c,m]],[/(playstation\s[3portablevi]+)/i],[u,[p,"Sony"],[c,m]],[/(sprint\s(\w+))/i],[[p,_.str,O.device.sprint.vendor],[u,_.str,O.device.sprint.model],[c,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[p,u,[c,b]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[p,[u,/_/g," "],[c,g]],[/(nexus\s9)/i],[u,[p,"HTC"],[c,b]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[u,[p,"Microsoft"],[c,m]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[p,"Microsoft"],[c,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i],[u,[p,"Motorola"],[c,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[u,[p,"Motorola"],[c,b]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[p,"Samsung"],u,[c,b]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[p,"Samsung"],u,[c,g]],[/(samsung);smarttv/i],[p,u,[c,h]],[/\(dtv[\);].+(aquos)/i],[u,[p,"Sharp"],[c,h]],[/sie-(\w+)*/i],[u,[p,"Siemens"],[c,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[p,"Nokia"],u,[c,g]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[u,[p,"Acer"],[c,b]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[p,"LG"],u,[c,b]],[/(lg) netcast\.tv/i],[p,u,[c,h]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[u,[p,"LG"],[c,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[u,[p,"Lenovo"],[c,b]],[/linux;.+((jolla));/i],[p,u,[c,g]],[/((pebble))app\/[\d\.]+\s/i],[p,u,[c,y]],[/android.+;\s(glass)\s\d/i],[u,[p,"Google"],[c,y]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[u,/_/g," "],[p,"Xiaomi"],[c,g]],[/(mobile|tablet);.+rv\:.+gecko\//i],[[c,k.lowerize],p,u]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[w,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[w,f],[/rv\:([\w\.]+).*(gecko)/i],[f,w]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[w,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[w,[f,_.str,O.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[w,"Windows"],[f,_.str,O.os.windows.version]],[/\((bb)(10);/i],[[w,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[w,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[w,"Symbian"],f],[/\((series40);/i],[w],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[w,"Firefox OS"],f],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[w,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[w,"Chromium OS"],f],[/(sunos)\s?([\w\.]+\d)*/i],[[w,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[w,f],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[w,"iOS"],[f,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[w,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[w,f]]},A=function E(e,i){if(!(this instanceof E))return new E(e,i).getResult();var n=e||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:o),s=i?k.extend(S,i):S;return this.getBrowser=function(){var e=_.rgx.apply(this,s.browser);return e.major=k.major(e.version),e},this.getCPU=function(){return _.rgx.apply(this,s.cpu)},this.getDevice=function(){return _.rgx.apply(this,s.device)},this.getEngine=function(){return _.rgx.apply(this,s.engine)},this.getOS=function(){return _.rgx.apply(this,s.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this.setUA(n),this};A.VERSION=n,A.BROWSER={NAME:w,MAJOR:l,VERSION:f},A.CPU={ARCHITECTURE:v},A.DEVICE={MODEL:u,VENDOR:p,TYPE:c,CONSOLE:m,MOBILE:g,SMARTTV:h,TABLET:b,WEARABLE:y,EMBEDDED:x},A.ENGINE={NAME:w,VERSION:f},A.OS={NAME:w,VERSION:f},i["default"]=A,e.exports=i["default"]}])});